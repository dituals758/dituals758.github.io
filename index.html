<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <title>WeekFlow ‚Äî –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ —Ü–∏—Ñ—Ä–æ–≤—ã–µ —á–∞—Å—ã</title>
    <meta name="description" content="–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ —á–∞—Å—ã —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π –¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–∞–∫ PWA –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.">
    <meta name="theme-color" content="#000000">
    
    <link rel="manifest" href="./manifest.json" crossorigin="use-credentials">
    <link rel="icon" href="./favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="./icon-32x32.png">
    <link rel="icon" type="image/png" sizes="192x192" href="./icon-192x192.png">
    <link rel="apple-touch-icon" href="./icon-180x180.png">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@300;400&display=swap" rel="stylesheet">
    
    <style>
        /* === CSS –ü–ï–†–ï–ú–ï–ù–ù–´–ï (–ï–î–ò–ù–°–¢–í–ï–ù–ù–û–ï –ú–ï–°–¢–û –û–ü–†–ï–î–ï–õ–ï–ù–ò–Ø –¶–í–ï–¢–û–í) === */
        :root {
            /* –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–≤–µ—Ç–∞ */
            --color-black: #000000;
            --color-black-90: #0a0a0a;
            --color-black-80: #111111;
            --color-black-70: #1a1a1a;
            --color-white: #ffffff;
            --color-white-10: rgba(255, 255, 255, 0.1);
            --color-white-20: rgba(255, 255, 255, 0.2);
            --color-white-30: rgba(255, 255, 255, 0.3);
            --color-white-50: rgba(255, 255, 255, 0.5);
            
            /* –¶–≤–µ—Ç–∞ –¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏ - –û–ü–†–ï–î–ï–õ–Ø–ï–ú –¢–û–õ–¨–ö–û –ó–î–ï–°–¨ */
            --color-day-0: #00f3ff; /* –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ */
            --color-day-1: #00ffaa; /* –í—Ç–æ—Ä–Ω–∏–∫ */
            --color-day-2: #bd00ff; /* –°—Ä–µ–¥–∞ */
            --color-day-3: #ff0066; /* –ß–µ—Ç–≤–µ—Ä–≥ */
            --color-day-4: #ffaa00; /* –ü—è—Ç–Ω–∏—Ü–∞ */
            --color-day-5: #00ff40; /* –°—É–±–±–æ—Ç–∞ */
            --color-day-6: #ff0033; /* –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ */
            
            /* –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ü–≤–µ—Ç–æ–≤ –¥–Ω–µ–π */
            --gradient-primary: linear-gradient(45deg, var(--color-day-0), var(--color-day-2));
            --gradient-week: conic-gradient(
                var(--color-day-0) 0deg 51.4deg,
                var(--color-day-1) 51.4deg 102.8deg,
                var(--color-day-2) 102.8deg 154.2deg,
                var(--color-day-3) 154.2deg 205.6deg,
                var(--color-day-4) 205.6deg 257deg,
                var(--color-day-5) 257deg 308.4deg,
                var(--color-day-6) 308.4deg 360deg
            );
            
            /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
            --transition-fast: 0.2s ease;
            --transition-normal: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 0.5s ease;
            
            /* –°–∫—Ä—É–≥–ª–µ–Ω–∏—è */
            --border-radius: 8px;
            --border-radius-circle: 50%;
            
            /* Z-–∏–Ω–¥–µ–∫—Å—ã */
            --z-modal: 1000;
            --z-top: 9999;
        }
        
        /* === –°–ë–†–û–° –°–¢–ò–õ–ï–ô === */
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* === –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò === */
        html {
            font-size: 16px;
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background: var(--color-black);
            color: var(--color-white);
            min-height: 100vh;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: env(safe-area-inset-top) env(safe-area-inset-right) 
                     env(safe-area-inset-bottom) env(safe-area-inset-left);
        }
        
        /* === –£–¢–ò–õ–ò–¢–´ === */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        .hidden {
            display: none !important;
        }
        
        .flex-center {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .text-center {
            text-align: center;
        }
        
        .text-uppercase {
            text-transform: uppercase;
        }
        
        /* === –ö–û–ú–ü–û–ù–ï–ù–¢–´ === */
        
        /* –ö–Ω–æ–ø–∫–∞ */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.625rem 1.125rem;
            font-size: 0.9rem;
            font-weight: 500;
            font-family: inherit;
            color: var(--color-white);
            background: var(--color-black-80);
            border: 1px solid var(--color-white-10);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition-normal);
            text-decoration: none;
            user-select: none;
            -webkit-user-select: none;
        }
        
        .btn:hover {
            background: var(--color-black-70);
            border-color: var(--color-white-20);
            transform: translateY(-1px);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn:focus-visible {
            outline: 2px solid var(--color-day-0);
            outline-offset: 2px;
        }
        
        /* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å */
        .top-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 4rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 1.25rem;
            z-index: var(--z-modal);
            background: linear-gradient(to bottom, rgba(0,0,0,0.9) 0%, transparent 100%);
            pointer-events: none;
        }
        
        .top-bar > * {
            pointer-events: auto;
        }
        
        .app-title {
            font-size: 1.4rem;
            font-weight: 600;
            letter-spacing: 0.125rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* –ö—Ä—É–≥ –Ω–µ–¥–µ–ª–∏ */
        .week-circle {
            position: relative;
            width: min(85vmin, 500px);
            height: min(85vmin, 500px);
            margin: 0 auto;
        }
        
        .week-ring {
            position: absolute;
            inset: 0;
            border-radius: var(--border-radius-circle);
            background: var(--gradient-week);
            opacity: 0.15;
            animation: rotateRing 120s linear infinite;
        }
        
        /* –¶–∏—Ñ–µ—Ä–±–ª–∞—Ç */
        .clock-face {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 70%;
            height: 70%;
            background: var(--color-black-90);
            border-radius: var(--border-radius-circle);
            border: 1px solid var(--color-black-70);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        
        /* –í—Ä–µ–º—è */
        .time-display {
            margin-bottom: 1.25rem;
        }
        
        .time-main {
            display: flex;
            align-items: baseline;
            justify-content: center;
            gap: 0.25rem;
            margin-bottom: 0.25rem;
        }
        
        .time-digit {
            font-family: 'JetBrains Mono', 'SF Mono', 'Roboto Mono', monospace;
            font-size: clamp(3rem, 10vmin, 4rem);
            font-weight: 300;
            font-variant-numeric: tabular-nums;
            color: var(--color-white);
            min-width: 1.2em;
            text-align: center;
            transition: var(--transition-normal);
        }
        
        .time-colon {
            font-size: clamp(3rem, 10vmin, 4rem);
            color: var(--color-white-30);
            animation: blink 2s ease-in-out infinite;
        }
        
        .seconds {
            font-size: clamp(1.2rem, 4vmin, 1.8rem);
            color: var(--color-white-30);
            font-family: 'JetBrains Mono', monospace;
            font-variant-numeric: tabular-nums;
        }
        
        /* –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ */
        .day-display {
            margin-bottom: 0.9375rem;
        }
        
        .day-name {
            font-size: clamp(1.5rem, 5vmin, 2rem);
            font-weight: 600;
            letter-spacing: 0.0625rem;
            margin-bottom: 0.25rem;
            transition: var(--transition-normal);
        }
        
        /* –î–∞—Ç–∞ */
        .date-display {
            font-size: clamp(0.9rem, 2.5vmin, 1.1rem);
            color: var(--color-white-30);
            margin-bottom: 0.9375rem;
        }
        
        /* –°—Ç–∞—Ç—É—Å */
        .status-container {
            margin-top: 0.625rem;
        }
        
        .status-text {
            font-size: clamp(0.8rem, 2.2vmin, 1rem);
            letter-spacing: 0.0625rem;
            color: var(--color-white-30);
            margin-bottom: 0.625rem;
        }
        
        /* –ü—Ä–æ–≥—Ä–µ—Å—Å –Ω–µ–¥–µ–ª–∏ */
        .week-progress {
            width: 80%;
            max-width: 250px;
            height: 0.1875rem;
            background: var(--color-black-70);
            border-radius: 0.125rem;
            margin: 0 auto;
            overflow: hidden;
        }
        
        .week-progress-bar {
            height: 100%;
            border-radius: 0.125rem;
            transition: width 0.5s ease;
        }
        
        /* –ú–µ—Ç–∫–∏ –¥–Ω–µ–π */
        .day-labels {
            position: absolute;
            inset: 0;
            pointer-events: none;
        }
        
        .day-label {
            position: absolute;
            font-size: clamp(0.7rem, 1.8vmin, 0.9rem);
            font-weight: 500;
            color: var(--color-white-30);
            transition: var(--transition-normal);
            transform: translate(-50%, -50%);
            text-align: center;
            width: 2rem;
            height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .day-label.active {
            color: var(--color-white);
            font-weight: 600;
            font-size: clamp(0.9rem, 2.2vmin, 1.1rem);
        }
        
        /* –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å */
        .bottom-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 4.375rem;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0 1.25rem;
            z-index: var(--z-modal);
            background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, transparent 100%);
            pointer-events: none;
        }
        
        .bottom-bar > * {
            pointer-events: auto;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.9375rem;
            max-width: 500px;
            width: 100%;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
            font-family: 'JetBrains Mono', monospace;
            font-variant-numeric: tabular-nums;
        }
        
        .stat-label {
            font-size: 0.7rem;
            color: var(--color-white-30);
            letter-spacing: 0.03125rem;
        }
        
        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(0.625rem);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: var(--z-top);
            opacity: 0;
            transition: opacity var(--transition-normal);
            padding: 1rem;
        }
        
        .modal-overlay.active {
            display: flex;
            opacity: 1;
        }
        
        .modal-content {
            background: var(--color-black-80);
            border: 1px solid var(--color-white-10);
            border-radius: 1rem;
            padding: 1.5rem;
            max-width: 450px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 1.25rem 2.5rem rgba(0, 0, 0, 0.5);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.25rem;
        }
        
        .modal-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--color-white);
        }
        
        /* === –ê–ù–ò–ú–ê–¶–ò–ò === */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes rotateRing {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        .week-ring {
            animation: rotateRing 120s linear infinite;
        }
        
        /* === –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ === */
        @media (max-width: 48rem) { /* 768px */
            .top-bar {
                height: 3.125rem;
                padding: 0 0.9375rem;
            }
            
            .app-title {
                font-size: 1.2rem;
            }
            
            .btn {
                padding: 0.5rem 0.875rem;
                font-size: 0.85rem;
            }
            
            .bottom-bar {
                height: 3.75rem;
            }
            
            .stats-grid {
                gap: 0.625rem;
            }
            
            .stat-value {
                font-size: 1rem;
            }
            
            .stat-label {
                font-size: 0.65rem;
            }
        }
        
        @media (orientation: landscape) and (max-height: 31.25rem) { /* 500px */
            .week-circle {
                width: min(70vmin, 400px);
                height: min(70vmin, 400px);
            }
            
            .time-digit,
            .time-colon {
                font-size: clamp(2.5rem, 8vmin, 3rem);
            }
            
            .seconds {
                font-size: clamp(1rem, 3vmin, 1.5rem);
            }
            
            .day-name {
                font-size: clamp(1.2rem, 4vmin, 1.5rem);
            }
            
            .bottom-bar {
                height: 3.125rem;
            }
        }
        
        /* –†–µ–∂–∏–º PWA */
        @media (display-mode: standalone) {
            .top-bar {
                padding-top: env(safe-area-inset-top);
                height: calc(3.125rem + env(safe-area-inset-top));
            }
            
            .bottom-bar {
                padding-bottom: env(safe-area-inset-bottom);
                height: calc(3.75rem + env(safe-area-inset-bottom));
            }
            
            #installBtn {
                display: none;
            }
        }
        
        /* –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        /* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤ */
        @supports not (backdrop-filter: blur(10px)) {
            .modal-overlay {
                background: rgba(0, 0, 0, 0.95);
            }
        }
        
        /* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
        @media (prefers-color-scheme: light) {
            :root {
                --color-black: #ffffff;
                --color-black-90: #f5f5f5;
                --color-black-80: #e0e0e0;
                --color-black-70: #cccccc;
                --color-white: #000000;
                --color-white-10: rgba(0, 0, 0, 0.1);
                --color-white-20: rgba(0, 0, 0, 0.2);
                --color-white-30: rgba(0, 0, 0, 0.3);
                --color-white-50: rgba(0, 0, 0, 0.5);
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
        <header class="top-bar" role="banner">
            <h1 class="app-title text-uppercase">WeekFlow</h1>
            <div class="action-buttons">
                <button id="settingsBtn" class="btn" aria-label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
                    <span aria-hidden="true">‚öôÔ∏è</span> –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                </button>
                <button id="installBtn" class="btn" aria-label="–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ">
                    <span aria-hidden="true">üì±</span> –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
                </button>
            </div>
        </header>
        
        <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
        <main class="clock-container flex-center" role="main">
            <div class="week-circle">
                <div class="week-ring" aria-hidden="true"></div>
                <div id="dayLabels" class="day-labels" aria-hidden="true"></div>
                <div class="clock-face">
                    <div class="time-display text-center">
                        <div class="time-main">
                            <div id="hours" class="time-digit" aria-live="polite">00</div>
                            <span class="time-colon" aria-hidden="true">:</span>
                            <div id="minutes" class="time-digit" aria-live="polite">00</div>
                        </div>
                        <div id="seconds" class="seconds" aria-live="polite">00</div>
                    </div>
                    
                    <div class="day-display text-center">
                        <div id="dayName" class="day-name text-uppercase" aria-live="polite">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</div>
                    </div>
                    
                    <div class="date-display text-center">
                        <div id="date" aria-live="polite">1 —è–Ω–≤–∞—Ä—è 2026</div>
                    </div>
                    
                    <div class="status-container text-center">
                        <div id="status" class="status-text text-uppercase" aria-live="polite">–î–µ–Ω—å</div>
                        <div class="week-progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                            <div id="weekProgress" class="week-progress-bar"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π -->
        <footer class="bottom-bar" role="contentinfo">
            <div class="stats-grid">
                <div class="stat-item">
                    <div id="weekNumber" class="stat-value" aria-live="polite">01</div>
                    <div class="stat-label text-uppercase">–ù–µ–¥–µ–ª—è</div>
                </div>
                <div class="stat-item">
                    <div id="dayProgress" class="stat-value" aria-live="polite">50%</div>
                    <div class="stat-label text-uppercase">–î–µ–Ω—å</div>
                </div>
                <div class="stat-item">
                    <div id="timeLeft" class="stat-value" aria-live="polite">12:34</div>
                    <div class="stat-label text-uppercase">–î–æ –∑–∞–≤—Ç—Ä–∞</div>
                </div>
            </div>
        </footer>
        
        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
        <div id="settingsModal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-hidden="true">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modalTitle" class="modal-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                    <button id="closeModal" class="btn" aria-label="–ó–∞–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏">‚úï</button>
                </div>
                
                <div id="settingsContent" class="settings-content">
                    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>
        </div>
    </div>

    <script>
        (function() {
            'use strict';
            
            // === –ö–û–ù–°–¢–ê–ù–¢–´ ===
            const CONFIG = {
                // –î–∞–Ω–Ω—ã–µ (–±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–≤–µ—Ç–æ–≤)
                DAY_NAMES: [
                    '–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', '–í—Ç–æ—Ä–Ω–∏–∫', '–°—Ä–µ–¥–∞', 
                    '–ß–µ—Ç–≤–µ—Ä–≥', '–ü—è—Ç–Ω–∏—Ü–∞', '–°—É–±–±–æ—Ç–∞', '–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ'
                ],
                DAY_SHORT: ['–ü–ù', '–í–¢', '–°–†', '–ß–¢', '–ü–¢', '–°–ë', '–í–°'],
                MONTHS: [
                    '—è–Ω–≤–∞—Ä—è', '—Ñ–µ–≤—Ä–∞–ª—è', '–º–∞—Ä—Ç–∞', '–∞–ø—Ä–µ–ª—è', '–º–∞—è', '–∏—é–Ω—è',
                    '–∏—é–ª—è', '–∞–≤–≥—É—Å—Ç–∞', '—Å–µ–Ω—Ç—è–±—Ä—è', '–æ–∫—Ç—è–±—Ä—è', '–Ω–æ—è–±—Ä—è', '–¥–µ–∫–∞–±—Ä—è'
                ],
                STATUS_TEXTS: {
                    NIGHT: 'üåô –ù–æ—á—å',
                    MORNING: 'üåÖ –£—Ç—Ä–æ',
                    DAY: '‚òÄÔ∏è –î–µ–Ω—å',
                    EVENING: 'üåÜ –í–µ—á–µ—Ä',
                    WEEKEND_NIGHT: 'üåô –ù–æ—á—å (–≤—ã—Ö–æ–¥–Ω–æ–π)',
                    WEEKEND_MORNING: 'üåÖ –£—Ç—Ä–æ (–≤—ã—Ö–æ–¥–Ω–æ–π)',
                    WEEKEND_DAY: '‚òÄÔ∏è –î–µ–Ω—å (–≤—ã—Ö–æ–¥–Ω–æ–π)',
                    WEEKEND_EVENING: 'üåÜ –í–µ—á–µ—Ä (–≤—ã—Ö–æ–¥–Ω–æ–π)'
                },
                SETTINGS_KEY: 'weekflow_settings',
                DEFAULT_SETTINGS: {
                    showSeconds: true,
                    timeFormat: '24h',
                    showAnimations: true,
                    vibration: false
                }
            };
            
            // === –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ===
            const elements = {
                // –í—Ä–µ–º—è
                hours: document.getElementById('hours'),
                minutes: document.getElementById('minutes'),
                seconds: document.getElementById('seconds'),
                
                // –î–∞—Ç–∞ –∏ –¥–µ–Ω—å
                dayName: document.getElementById('dayName'),
                date: document.getElementById('date'),
                status: document.getElementById('status'),
                
                // –ü—Ä–æ–≥—Ä–µ—Å—Å
                weekProgress: document.getElementById('weekProgress'),
                dayLabels: document.getElementById('dayLabels'),
                
                // –ö–Ω–æ–ø–∫–∏
                installBtn: document.getElementById('installBtn'),
                settingsBtn: document.getElementById('settingsBtn'),
                
                // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                settingsModal: document.getElementById('settingsModal'),
                closeModal: document.getElementById('closeModal'),
                settingsContent: document.getElementById('settingsContent'),
                
                // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                weekNumber: document.getElementById('weekNumber'),
                dayProgress: document.getElementById('dayProgress'),
                timeLeft: document.getElementById('timeLeft')
            };
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
            const state = {
                currentDay: -1,
                currentHour: -1,
                deferredPrompt: null,
                settings: JSON.parse(JSON.stringify(CONFIG.DEFAULT_SETTINGS)),
                updateInterval: null,
                dayColors: [] // –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –∏–∑ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
            };
            
            // === –£–¢–ò–õ–ò–¢–´ ===
            const utils = {
                // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª
                formatNumber(num) {
                    return num < 10 ? `0${num}` : `${num}`;
                },
                
                // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–Ω—è –Ω–µ–¥–µ–ª–∏ (0-6, –≥–¥–µ 0 - –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫)
                getWeekDay(date) {
                    return date.getDay() === 0 ? 6 : date.getDay() - 1;
                },
                
                // –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –Ω–µ–¥–µ–ª–∏ –≤ –≥–æ–¥—É
                getWeekNumber(date) {
                    const startDate = new Date(date.getFullYear(), 0, 1);
                    const days = Math.floor((date - startDate) / (24 * 60 * 60 * 1000));
                    return Math.ceil((date.getDay() + 1 + days) / 7);
                },
                
                // –ü—Ä–æ–≥—Ä–µ—Å—Å –¥–Ω—è –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö
                getDayProgress(date) {
                    const totalSeconds = 86400;
                    const currentSeconds = date.getHours() * 3600 + 
                                         date.getMinutes() * 60 + 
                                         date.getSeconds();
                    return (currentSeconds / totalSeconds) * 100;
                },
                
                // –í—Ä–µ–º—è –¥–æ –∑–∞–≤—Ç—Ä–∞
                getTimeUntilTomorrow(date) {
                    const tomorrow = new Date(date);
                    tomorrow.setDate(tomorrow.getDate() + 1);
                    tomorrow.setHours(0, 0, 0, 0);
                    
                    const diff = tomorrow - date;
                    const hours = Math.floor(diff / 3600000);
                    const minutes = Math.floor((diff % 3600000) / 60000);
                    
                    return { hours, minutes };
                },
                
                // –ó–∞–≥—Ä—É–∑–∫–∞ —Ü–≤–µ—Ç–æ–≤ –∏–∑ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (–ï–î–ò–ù–°–¢–í–ï–ù–ù–û–ï –º–µ—Å—Ç–æ!)
                loadColorsFromCSS() {
                    const style = getComputedStyle(document.documentElement);
                    state.dayColors = Array.from({ length: 7 }, (_, i) => 
                        style.getPropertyValue(`--color-day-${i}`).trim()
                    );
                },
                
                // –†–∞–±–æ—Ç–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
                saveSettings() {
                    try {
                        localStorage.setItem(CONFIG.SETTINGS_KEY, JSON.stringify(state.settings));
                    } catch (error) {
                        console.warn('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:', error);
                    }
                },
                
                loadSettings() {
                    try {
                        const saved = localStorage.getItem(CONFIG.SETTINGS_KEY);
                        if (saved) {
                            const parsed = JSON.parse(saved);
                            state.settings = { ...CONFIG.DEFAULT_SETTINGS, ...parsed };
                        }
                    } catch (error) {
                        console.warn('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:', error);
                    }
                },
                
                applySettings() {
                    // –ü–æ–∫–∞–∑/—Å–∫—Ä—ã—Ç–∏–µ —Å–µ–∫—É–Ω–¥
                    elements.seconds.style.display = state.settings.showSeconds ? 'block' : 'none';
                    
                    // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–π
                    document.body.dataset.animations = state.settings.showAnimations;
                },
                
                // –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
                addEventListener(element, event, handler) {
                    if (element) {
                        element.addEventListener(event, handler);
                    }
                }
            };
            
            // === –û–ë–ù–û–í–õ–ï–ù–ò–ï –ò–ù–¢–ï–†–§–ï–ô–°–ê ===
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
            function updateTime() {
                const now = new Date();
                let hours = now.getHours();
                
                if (state.settings.timeFormat === '12h') {
                    const period = hours >= 12 ? 'PM' : 'AM';
                    hours = hours % 12 || 12;
                }
                
                elements.hours.textContent = utils.formatNumber(hours);
                elements.minutes.textContent = utils.formatNumber(now.getMinutes());
                
                if (state.settings.showSeconds) {
                    elements.seconds.textContent = utils.formatNumber(now.getSeconds());
                }
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞—Ç—ã –∏ –¥–Ω—è
            function updateDate() {
                const now = new Date();
                const weekDay = utils.getWeekDay(now);
                
                if (state.currentDay !== weekDay) {
                    state.currentDay = weekDay;
                    updateDayDisplay(weekDay);
                }
                
                elements.date.textContent = 
                    `${now.getDate()} ${CONFIG.MONTHS[now.getMonth()]} ${now.getFullYear()}`;
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–Ω—è
            function updateDayDisplay(weekDay) {
                const dayColor = state.dayColors[weekDay];
                
                elements.dayName.textContent = CONFIG.DAY_NAMES[weekDay];
                elements.dayName.style.color = dayColor;
                elements.hours.style.color = dayColor;
                elements.minutes.style.color = dayColor;
                elements.weekProgress.style.background = dayColor;
                
                updateDayLabels(weekDay);
                
                // –ê–Ω–∏–º–∞—Ü–∏—è —Å–º–µ–Ω—ã –¥–Ω—è
                if (state.settings.showAnimations) {
                    requestAnimationFrame(() => {
                        elements.dayName.style.animation = 'none';
                        requestAnimationFrame(() => {
                            elements.dayName.style.animation = 'fadeIn 0.5s ease';
                        });
                    });
                }
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–∫ –¥–Ω–µ–π
            function updateDayLabels(activeDay) {
                const labels = elements.dayLabels.querySelectorAll('.day-label');
                labels.forEach((label, index) => {
                    const isActive = index === activeDay;
                    label.classList.toggle('active', isActive);
                    label.style.opacity = isActive ? '1' : '0.3';
                });
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
            function updateStatus() {
                const now = new Date();
                const weekDay = utils.getWeekDay(now);
                const hour = now.getHours();
                
                if (state.currentHour === hour) return;
                state.currentHour = hour;
                
                let statusKey;
                
                if (weekDay >= 5) { // –í—ã—Ö–æ–¥–Ω—ã–µ
                    if (hour < 6) statusKey = 'WEEKEND_NIGHT';
                    else if (hour < 12) statusKey = 'WEEKEND_MORNING';
                    else if (hour < 18) statusKey = 'WEEKEND_DAY';
                    else statusKey = 'WEEKEND_EVENING';
                } else { // –ë—É–¥–Ω–∏
                    if (hour < 6) statusKey = 'NIGHT';
                    else if (hour < 12) statusKey = 'MORNING';
                    else if (hour < 18) statusKey = 'DAY';
                    else statusKey = 'EVENING';
                }
                
                elements.status.textContent = CONFIG.STATUS_TEXTS[statusKey];
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –Ω–µ–¥–µ–ª–∏
            function updateWeekProgress() {
                const now = new Date();
                const weekDay = utils.getWeekDay(now);
                const progress = ((weekDay + 1) / 7) * 100;
                elements.weekProgress.style.width = `${progress}%`;
                elements.weekProgress.parentElement.setAttribute('aria-valuenow', Math.round(progress));
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            function updateStats() {
                const now = new Date();
                
                // –ù–æ–º–µ—Ä –Ω–µ–¥–µ–ª–∏
                elements.weekNumber.textContent = utils.formatNumber(utils.getWeekNumber(now));
                
                // –ü—Ä–æ–≥—Ä–µ—Å—Å –¥–Ω—è
                const dayPercent = utils.getDayProgress(now);
                elements.dayProgress.textContent = `${Math.round(dayPercent)}%`;
                
                // –í—Ä–µ–º—è –¥–æ –∑–∞–≤—Ç—Ä–∞
                const { hours, minutes } = utils.getTimeUntilTomorrow(now);
                elements.timeLeft.textContent = 
                    `${utils.formatNumber(hours)}:${utils.formatNumber(minutes)}`;
            }
            
            // –°–æ–∑–¥–∞–Ω–∏–µ –º–µ—Ç–æ–∫ –¥–Ω–µ–π
            function createDayLabels() {
                const radius = 180;
                const center = 200;
                
                CONFIG.DAY_SHORT.forEach((day, index) => {
                    const angle = (index * (360 / 7) - 90) * Math.PI / 180;
                    const x = center + radius * Math.cos(angle);
                    const y = center + radius * Math.sin(angle);
                    
                    const label = document.createElement('div');
                    label.className = 'day-label';
                    label.textContent = day;
                    label.style.left = `${x}px`;
                    label.style.top = `${y}px`;
                    label.style.color = state.dayColors[index];
                    
                    elements.dayLabels.appendChild(label);
                });
            }
            
            // === –ù–ê–°–¢–†–û–ô–ö–ò ===
            
            // –†–µ–Ω–¥–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫
            function renderSettings() {
                elements.settingsContent.innerHTML = `
                    <form id="settingsForm" style="display: flex; flex-direction: column; gap: 1.25rem;">
                        <fieldset style="border: none; padding: 0;">
                            <legend style="font-weight: 600; color: var(--color-white); margin-bottom: 0.75rem;">
                                –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                            </legend>
                            
                            <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                                <label style="display: flex; align-items: center; gap: 0.625rem; cursor: pointer;">
                                    <input type="checkbox" 
                                           id="showSeconds" 
                                           ${state.settings.showSeconds ? 'checked' : ''}
                                           style="accent-color: var(--color-day-0);">
                                    <span style="color: var(--color-white-50);">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–µ–∫—É–Ω–¥—ã</span>
                                </label>
                                
                                <label style="display: flex; align-items: center; gap: 0.625rem; cursor: pointer;">
                                    <input type="checkbox" 
                                           id="showAnimations" 
                                           ${state.settings.showAnimations ? 'checked' : ''}
                                           style="accent-color: var(--color-day-0);">
                                    <span style="color: var(--color-white-50);">–í–∫–ª—é—á–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏</span>
                                </label>
                                
                                <label style="display: flex; align-items: center; gap: 0.625rem; cursor: pointer;">
                                    <input type="checkbox" 
                                           id="vibration" 
                                           ${state.settings.vibration ? 'checked' : ''}
                                           style="accent-color: var(--color-day-0);">
                                    <span style="color: var(--color-white-50);">–í–∏–±—Ä–∞—Ü–∏—è –ø—Ä–∏ —Å–º–µ–Ω–µ —á–∞—Å–∞</span>
                                </label>
                            </div>
                        </fieldset>
                        
                        <fieldset style="border: none; padding: 0;">
                            <legend style="font-weight: 600; color: var(--color-white); margin-bottom: 0.75rem;">
                                –§–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏
                            </legend>
                            
                            <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                                <label style="display: flex; align-items: center; gap: 0.625rem; cursor: pointer;">
                                    <input type="radio" 
                                           name="timeFormat" 
                                           value="24h" 
                                           ${state.settings.timeFormat === '24h' ? 'checked' : ''}
                                           style="accent-color: var(--color-day-0);">
                                    <span style="color: var(--color-white-50);">24-—á–∞—Å–æ–≤–æ–π —Ñ–æ—Ä–º–∞—Ç</span>
                                </label>
                                
                                <label style="display: flex; align-items: center; gap: 0.625rem; cursor: pointer;">
                                    <input type="radio" 
                                           name="timeFormat" 
                                           value="12h" 
                                           ${state.settings.timeFormat === '12h' ? 'checked' : ''}
                                           style="accent-color: var(--color-day-0);">
                                    <span style="color: var(--color-white-50);">12-—á–∞—Å–æ–≤–æ–π —Ñ–æ—Ä–º–∞—Ç (AM/PM)</span>
                                </label>
                            </div>
                        </fieldset>
                        
                        <div style="display: flex; gap: 0.75rem; margin-top: 0.5rem;">
                            <button type="submit" class="btn" style="flex: 1; background: var(--gradient-primary); border: none;">
                                –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                            </button>
                            <button type="button" id="resetSettings" class="btn" style="flex: 1;">
                                –°–±—Ä–æ—Å–∏—Ç—å
                            </button>
                        </div>
                    </form>
                `;
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã
                const form = document.getElementById('settingsForm');
                const resetBtn = document.getElementById('resetSettings');
                
                form.addEventListener('submit', handleSettingsSave);
                utils.addEventListener(resetBtn, 'click', resetSettings);
            }
            
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
            function handleSettingsSave(event) {
                event.preventDefault();
                
                state.settings.showSeconds = document.getElementById('showSeconds').checked;
                state.settings.showAnimations = document.getElementById('showAnimations').checked;
                state.settings.vibration = document.getElementById('vibration').checked;
                
                const selectedFormat = document.querySelector('input[name="timeFormat"]:checked');
                if (selectedFormat) {
                    state.settings.timeFormat = selectedFormat.value;
                }
                
                utils.saveSettings();
                utils.applySettings();
                closeSettingsModal();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                updateTime();
            }
            
            // –°–±—Ä–æ—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫
            function resetSettings() {
                if (confirm('–°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é?')) {
                    state.settings = JSON.parse(JSON.stringify(CONFIG.DEFAULT_SETTINGS));
                    utils.saveSettings();
                    utils.applySettings();
                    closeSettingsModal();
                    updateTime();
                }
            }
            
            // === –£–ü–†–ê–í–õ–ï–ù–ò–ï –ú–û–î–ê–õ–¨–ù–´–ú –û–ö–ù–û–ú ===
            
            function openSettingsModal() {
                elements.settingsModal.setAttribute('aria-hidden', 'false');
                elements.settingsModal.classList.add('active');
                renderSettings();
                
                // –§–æ–∫—É—Å –Ω–∞ –ø–µ—Ä–≤–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ —Ñ–æ—Ä–º—ã
                setTimeout(() => {
                    const firstInput = elements.settingsContent.querySelector('input');
                    if (firstInput) firstInput.focus();
                }, 100);
            }
            
            function closeSettingsModal() {
                elements.settingsModal.setAttribute('aria-hidden', 'true');
                elements.settingsModal.classList.remove('active');
                elements.settingsBtn.focus();
            }
            
            // === PWA ===
            
            function initPWA() {
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
                utils.addEventListener(window, 'beforeinstallprompt', (e) => {
                    e.preventDefault();
                    state.deferredPrompt = e;
                    
                    utils.addEventListener(elements.installBtn, 'click', async () => {
                        if (!state.deferredPrompt) return;
                        
                        try {
                            state.deferredPrompt.prompt();
                            const { outcome } = await state.deferredPrompt.userChoice;
                            
                            if (outcome === 'accepted') {
                                console.log('WeekFlow —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω');
                                elements.installBtn.classList.add('hidden');
                            }
                        } catch (error) {
                            console.error('–û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:', error);
                        }
                        
                        state.deferredPrompt = null;
                    });
                });
                
                // –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
                utils.addEventListener(window, 'appinstalled', () => {
                    elements.installBtn.classList.add('hidden');
                    state.deferredPrompt = null;
                });
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞, –µ—Å–ª–∏ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
                if (window.matchMedia('(display-mode: standalone)').matches || 
                    window.navigator.standalone === true) {
                    elements.installBtn.classList.add('hidden');
                }
            }
            
            // === SERVICE WORKER ===
            
            async function initServiceWorker() {
                if ('serviceWorker' in navigator) {
                    try {
                        const registration = await navigator.serviceWorker.register('./sw.js');
                        console.log('Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω:', registration.scope);
                    } catch (error) {
                        console.error('Service Worker –æ—à–∏–±–∫–∞:', error);
                    }
                }
            }
            
            // === –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô ===
            
            function setupEventListeners() {
                // –ö–Ω–æ–ø–∫–∏
                utils.addEventListener(elements.settingsBtn, 'click', openSettingsModal);
                utils.addEventListener(elements.closeModal, 'click', closeSettingsModal);
                
                // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
                utils.addEventListener(elements.settingsModal, 'click', (e) => {
                    if (e.target === elements.settingsModal) {
                        closeSettingsModal();
                    }
                });
                
                // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ ESC
                utils.addEventListener(document, 'keydown', (e) => {
                    if (e.key === 'Escape' && elements.settingsModal.classList.contains('active')) {
                        closeSettingsModal();
                    }
                });
                
                // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
                let resizeTimeout;
                utils.addEventListener(window, 'resize', () => {
                    clearTimeout(resizeTimeout);
                    resizeTimeout = setTimeout(() => {
                        elements.dayLabels.innerHTML = '';
                        createDayLabels();
                        updateDayLabels(state.currentDay);
                    }, 150);
                });
                
                // –ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
                utils.addEventListener(window, 'orientationchange', () => {
                    setTimeout(() => {
                        elements.dayLabels.innerHTML = '';
                        createDayLabels();
                        updateDayLabels(state.currentDay);
                    }, 400);
                });
            }
            
            // === –û–°–ù–û–í–ù–ê–Ø –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===
            
            function init() {
                // 1. –ó–∞–≥—Ä—É–∑–∫–∞ —Ü–≤–µ—Ç–æ–≤ –∏–∑ CSS (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –º–µ—Å—Ç–æ!)
                utils.loadColorsFromCSS();
                
                // 2. –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
                utils.loadSettings();
                utils.applySettings();
                
                // 3. –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
                createDayLabels();
                
                // 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ–±—ã—Ç–∏–π
                setupEventListeners();
                
                // 5. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è PWA
                initPWA();
                
                // 6. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Service Worker
                initServiceWorker();
                
                // 7. –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
                updateAll();
                
                // 8. –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
                startUpdateTimer();
                
                // 9. –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
                utils.addEventListener(window, 'beforeunload', cleanup);
            }
            
            function updateAll() {
                updateTime();
                updateDate();
                updateStatus();
                updateWeekProgress();
                updateStats();
            }
            
            function startUpdateTimer() {
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
                state.updateInterval = setInterval(() => {
                    const now = new Date();
                    
                    // –í—Ä–µ–º—è
                    updateTime();
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–º–µ–Ω—É –º–∏–Ω—É—Ç—ã/—á–∞—Å–∞/–¥–Ω—è
                    if (now.getSeconds() === 0) {
                        updateDate();
                        updateStatus();
                        updateWeekProgress();
                        
                        // –í–∏–±—Ä–∞—Ü–∏—è –ø—Ä–∏ —Å–º–µ–Ω–µ —á–∞—Å–∞
                        if (now.getMinutes() === 0 && state.settings.vibration && 'vibrate' in navigator) {
                            navigator.vibrate([100]);
                        }
                    }
                    
                    // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
                    if (now.getSeconds() % 30 === 0) {
                        updateStats();
                    }
                }, 1000);
            }
            
            function cleanup() {
                if (state.updateInterval) {
                    clearInterval(state.updateInterval);
                }
            }
            
            // === –ó–ê–ü–£–°–ö –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø ===
            
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', init);
            } else {
                init();
            }
        })();
    </script>
</body>
</html>